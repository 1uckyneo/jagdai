# Jagdai

[English] | [‰∏≠Êñá] | “ö–∞–∑–∞“õ—à–∞üá∞üáø

[English]: ./README.md
[‰∏≠Êñá]: ./README_zh_CN.md
[“ö–∞–∑–∞“õ—à–∞üá∞üáø]: ./README_kk_KZ.md

[![npm version](https://img.shields.io/npm/v/jagdai.svg?logo=npm)](https://www.npmjs.com/package/jagdai)
[![bundle size](https://img.shields.io/bundlephobia/minzip/jagdai.svg?label=bundle%20size&logo=javascript)](https://www.npmjs.com/package/jagdai)
![React](https://img.shields.io/npm/dependency-version/jagdai/peer/react?logo=react)

> –ë“±–ª, React state –∂”ô–Ω–µ event –±–∞—Å“õ–∞—Ä—É–¥—ã –±–∞“õ—ã–ª–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–ª—ã —à–µ—à—ñ–º–¥—ñ “Ø–π—Ä–µ–Ω—É –º“Ø–ª–¥–µ–º—Å—ã–∑ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞.

## Jagdai –¥–µ–≥–µ–Ω –Ω–µ?

Jagdai(–¥—ã–±—ã—Å—ã `/ í…ë Åd…ëj/`, –ñ–∞“ì–¥–∞–π) –ë“±–ª, React state –∂”ô–Ω–µ event –±–∞—Å“õ–∞—Ä—É–¥—ã –±–∞“õ—ã–ª–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–ª—ã —à–µ—à—ñ–º–¥—ñ “Ø–π—Ä–µ–Ω—É –º“Ø–ª–¥–µ–º—Å—ã–∑ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞.

- –¢”ô—Ä—Ç—ñ–ø—Ç—ñ–∫ React Hook API –ª–∞—Ä—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É“ì–∞ –±—ñ–ª–≥–µ–Ω–¥–µ ”ô–¥—ñ—Å—ñ–º–µ–Ω “Ø–π—Ä–µ–Ω—É “õ–∏—ã–Ω –µ–º–µ—Å, –∫”©–ø—Ç–µ–≥–µ–Ω –∫—ñ—Ä—É-—à—ã“ì—É–ª–∞—Ä–¥–∞ “õ–æ–ª–∞–π–ª—ã.
- –°—Ç–∞—Ç—É—Å –±–∞“õ—ã–ª–∞—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–ª–∞—Ä—ã–Ω “õ–æ–ª–¥–∞–Ω–±–∞—Å–∞“£—ã–∑ –¥–∞, ”ô—Ä–µ–∫–µ—Ç—Ç—ñ–ª—ñ–∫—Ç—ñ –º–æ–ª–∞–π—Ç—ã–Ω –∂–∞“£–∞—Ä—Ç—É –∂–æ–±–∞–ª–∞—Ä—ã–Ω –æ“£—Ç–∞–π–ª—ã –¥–∞–π—ã–Ω–¥–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥—ñ“£ –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã –æ“£–∞–π –∂”ô–Ω–µ “õ–∏—ã–Ω—Å“±—Ä–∞–ø—Å—ã–∑ event –±–∞“õ—ã–ª–∞—É –∂–æ–ª–¥–∞—Ä—ã.
- ”®—Ç–µ –∂–∞“õ—Å—ã TypeScript —Ç“Ø—Ä–ª—ñ–∫—Ç—ñ—Ä—É–¥—ñ –±–∞—Ä–ª–∞–¥—ã.

## –û–Ω—ã CodeSandbox-—Ç–∞ —Å—ã–Ω–∞“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.

[![Edit](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/p/sandbox/jagdai-counter-demo-6mbbt3?file=%2Fsrc%2Fstore%2FcounterStore.ts)

## –û—Ä–Ω–∞—Ç—É

```base
npm install jagdai
```

## “ö–æ–ª–¥–∞–Ω—É

### Store “õ“±—Ä—ã“£—ã–∑

–ê–ª–¥—ã–º–µ–Ω, **jagdai**-–¥–µ –±–µ—Ä—ñ–ª–≥–µ–Ω `create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω “õ–æ–ª–¥–∞–Ω—ã–ø **store** –∂–∞—Å–∞“£—ã–∑.

`create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã —Å—ñ–∑–¥—ñ“£ store-–¥—ñ –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω ”©–∑–≥–µ—Ä—Ç—É—à—ñ React Hook –∫”©—Ä—É–¥—ñ —Å“±—Ä–∞–π–¥—ã.

–ë“±–ª —Ñ—É–Ω–∫—Ü–∏—è –±“Ø—Ç—ñ–Ω—ñ–Ω–¥–µ –±–∞—Ä–ª—ã“õ —Ç“Ø—Ä–¥–µ–≥—ñ React Hooks-—Ç—ñ –ø–∞–π–¥–∞–ª–∞–Ω—É“ì–∞ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ–¥—ñ.

–°—ñ–∑ `useState` —Å–∏—è“õ—Ç—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç—Ç—ã React API-–¥—ã “õ–æ–ª–¥–∞–Ω—ã–ø store state-—Ç—ñ –∞–Ω—ã“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.

```typescript
import { create } from 'jagdai'
import { useState } from 'react'

export const CounterStore = create(() => {
  const [count, setCount] = useState(0)

  return {
    query: {
      count,
    },
  }
})
```

–ë—ñ—Ä–∞“õ `create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–ª—ñ–∫ hook-—Ç—ã“£ “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ–Ω–µ –∫–µ–π–±—ñ—Ä —Ç–∞–ª–∞–ø—Ç–∞—Ä “õ–æ—è–¥—ã:

1. –ë—ñ—Ä—ñ–Ω—à—ñ, –æ–Ω—ã“£ “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ –±—ñ—Ä –æ–±—ä–µ–∫—Ç –±–æ–ª—É—ã –∫–µ—Ä–µ–∫.
2. –ï–≥–µ—Ä —Å—ñ–∑ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ–∫ state-—Ç–µ—Ä–¥—ñ –±”©–ª—ñ—Å—É–¥—ñ “õ–∞–ª–∞–π—Å—ã“£—ã–∑, –æ–Ω–¥–∞ –æ–Ω—ã“£ `query` –∂–æ–ª–∞“ì—ã “Ø—à—ñ–Ω –±—ñ—Ä –æ–±—ä–µ–∫—Ç –∞–Ω—ã“õ—Ç–∞—É –∫–µ—Ä–µ–∫ –∂”ô–Ω–µ –±”©–ª—ñ—Å–µ—Ç—ñ–Ω state-—Ç–µ—Ä–¥—ñ –æ“ì–∞–Ω –±—ñ—Ä–Ω–µ—à–µ –∂–æ–ª–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä—É –∫–µ—Ä–µ–∫, –±“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä –æ—Å—ã state-—Ç–µ—Ä–¥—ñ —Å“±—Ä–∞—É –∂”ô–Ω–µ –∂–∞–∑—ã–ª—É“ì–∞ –±–æ–ª–∞–¥—ã –¥–µ–≥–µ–Ω –º–∞“ì—ã–Ω–∞—Å—ã.

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞“ì–∞—Å—ã–Ω–¥–∞ store-provider –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ —Ç“Ø–π—ñ“£–∫–µ—É

`create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã –æ–±—ä–µ–∫—Ç—Ç—ñ “õ–∞–π—Ç–∞—Ä–∞–¥—ã, –æ–Ω–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞—Ç—ã–Ω Provider –∂–æ–ª–∞“ì—ã –±–∞—Ä.

> –ú—ã–Ω–¥–∞ –æ—Å—ã store-–¥—ñ“£ “õ–æ–ª–¥–∞–Ω—ã–ª—É —Å—Ü–µ–Ω–∞—Ä–∏–π—ñ–Ω–µ –Ω–µ–≥—ñ–∑–¥–µ–ª—ñ–ø, –æ–Ω—ã `CounterStore` –¥–µ–ø –∞—Ç–∞—É –∫–µ—Ä–µ–∫.

–°—ñ–∑ `Provider` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ React –∞“ì–∞—Å—ã–Ω—ã“£ –±—ñ—Ä —Ç“Ø–π—ñ–Ω—ñ–Ω–µ —Ç“Ø–π—ñ“£–∫–µ—É –∫–µ—Ä–µ–∫.

```jsx
const CounterApp = () => {
  return (
    <CounterStore.Provider>
      <Count />
      <Controls />
    </CounterStore.Provider>
  )
}
```

–¢–µ–∫ –∫–µ–ª–µ—Ç—ñ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä –º–µ–Ω –¥“±—Ä—ã—Å “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–¥–∞, `query`-–¥–∞ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω “õ–æ–ª–¥–∞–Ω–±–∞–Ω—ã –ø–∞–π–¥–∞–ª–∞–Ω—É –º“Ø–º–∫—ñ–Ω.

### State-–¥—ñ —ñ–∑–¥–µ–ø —Ç“±—Ä—É –∂”ô–Ω–µ “õ–æ–ª–¥–∞–Ω—É

`create` —Ç—ñ “õ–∞–π—Ç–∞—Ä“ì–∞–Ω –æ–±—ä–µ–∫—Ç—Ç—ñ“£ `useQuery` –∂–æ–ª–∞“ì—ã React Hook-—Ç—ñ, —Å—ñ–∑–≥–µ store-–¥—ñ“£ query –∂–æ–ª–∞“ì—ã–Ω–¥–∞ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω state-—Ç—ñ —Å“±—Ä–∞—É –∂”ô–Ω–µ “õ–æ–ª–¥–∞–Ω—É“ì–∞ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ–¥—ñ.

–°—ñ–∑ –æ“ì–∞–Ω —Å“±–∑–¥–∞–ø ”©—Ç—É—à—ñ–Ω ”©—Ç—ñ–Ω—É—ñ“£—ñ–∑ –∫–µ—Ä–µ–∫, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –æ–ª –∂–∞–∑—ã–ª“ì–∞–Ω —Å—Ç–µ–π—Ç-—Ç–µ—Ä—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—ñ—Å—ñ–Ω –∂”ô–Ω–µ ”©–∑—ñ –¥–µ ”©–∑–≥–µ—Ä—ñ—Å –µ—Ç—ñ–ø —Ç–∞–±—ã–ª–º–∞–π –∂–∞—Ç“õ–∞–Ω —Å—Ç–µ–π—Ç-—Ç–µ—Ä—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—ñ—Å—ñ–Ω –∫”©–∑–¥–µ—Ä—ñ–Ω—ñ“£ –∞—É–¥–∞—Ä—É—ã–Ω –∫”©—Ä—É –∞—Ä“õ—ã–ª—ã –æ—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ “õ–∞–π—Ç–∞-–∂–∞—Å–∞—É“ì–∞ —Ç–∞–±—ã—Å –±–æ–ª–∞–¥—ã.

–ú—ã—Å–∞–ª—ã, `query` –∫–µ—Å—Ç–µ—Å—ñ–Ω–¥–µ `count` —Ç—É—Ä–∞–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω –±–∞—Å“õ–∞ —Å—Ç–µ–π—Ç—Ç–µ—Ä–≥–µ –∂–∞–∑—ã–ª“ì–∞–Ω –∂–∞—É–∞–ø—Ç—ã “õ–∞–π—Ç—ã–ø –∫”©—Ä—É–≥–µ –±–æ–ª–∞–¥—ã, —Ç–µ–∫ `count` ”©–∑–≥–µ—Ä–≥–µ–Ω –∫–µ–∑–¥–µ –±“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç “õ–∞–π—Ç–∞-–∂–∞—Å–∞–ª–∞–¥—ã.

```jsx
const Count = () => {
  const count = CounterStore.useQuery((query) => query.count)

  return <div>{count}</div>
}
```

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥–µ store-–≥–µ command –∂—ñ–±–µ—Ä—É

`query` –∂–æ–ª–∞“ì—ã–Ω –∞–Ω—ã“õ—Ç–∞“ì–∞–Ω–Ω–∞–Ω –±–∞—Å“õ–∞, —Å—ñ–∑ store-–¥—ñ –∞–Ω—ã“õ—Ç–∞—É –∫–µ–∑—ñ–Ω–¥–µ `command` –∂–æ–ª–∞“ì—ã–Ω –¥–∞ –∞–Ω—ã“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã, –±“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä store-–≥–µ –∂—ñ–±–µ—Ä–µ –∞–ª–∞—Ç—ã–Ω –∫–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã –∫”©—Ä—Å–µ—Ç–µ–¥—ñ.

–ú—ã—Å–∞–ª—ã, —Å—ñ–∑ store-–¥—ñ“£ –∞–Ω—ã“õ—Ç–∞—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ —Ñ—É–Ω–∫—Ü–∏—è –±“Ø—Ç—ñ–Ω—ñ–Ω–¥–µ state-—Ç—ñ –∂–∞“£–∞—Ä—Ç—É “Ø—à—ñ–Ω —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –∞–Ω—ã“õ—Ç–∞—É –∂”ô–Ω–µ –æ–Ω—ã `command` –∂–æ–ª–∞“ì—ã–Ω–∞ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã.

```typescript
export const CounterStore = create(() => {
  const [count, setCount] = useState(0)

  const increase = () => {
    setCount(count + 1)
  }

  return {
    query: {
      count,
    },
    command: {
      increase,
    },
  }
})
```

`create` “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ–Ω–¥–µ `useCommand` ”©—Ä—ñ—Å—Ç—ñ –±–∞—Ä, –æ–ª —Å–æ–Ω–¥–∞–π-–∞“õ Hook. –°—ñ–∑ –æ–Ω—ã –º–∞–≥–∞–∑–∏–Ω–¥–∞ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω –±“±–π—Ä—ã“õ—Ç–∞—Ä–¥—ã –∞–ª—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω–∞ –∞–ª–∞—Å—ã–∑.

```jsx
const Controls = () => {
  const { increase } = CounterStore.useCommand()

  return <button onClick={increase}>+</button>
}
```

–¢“Ø–π–º–µ—à—ñ–≥—ñ –±–∞—Å—ã–ª“ì–∞–Ω–¥–∞, `increase` –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã –∂”ô–Ω–µ store-–¥–µ–≥—ñ `count`-—Ç—ã –∂–∞“£–∞—Ä—Ç–∞–¥—ã.

–°–æ–Ω—ã–º–µ–Ω “õ–∞—Ç–∞—Ä, `CounterStore.useQuery` –∞—Ä“õ—ã–ª—ã `count`-“õ–∞ –∂–∞–∑—ã–ª“ì–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä “õ–∞–π—Ç–∞ –∂–∞—Å–∞–ª—É“ì–∞ –∂”ô–Ω–µ —Å–æ“£“ì—ã `count`-—Ç—ã –∞–ª—É“ì–∞ —Ç—Ä–∏–≥–≥–µ—Ä–ª–µ–Ω–µ–¥—ñ.

---

### “ö–∞–ª–∞–π—Å—ã–∑–¥–∞–Ω `command`-`useCommand` “õ–∞–∂–µ—Ç?

> `query` –∂”ô–Ω–µ `useQuery` –∂“±–ø—Ç—ã“ì—ã–º–µ–Ω –º–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–º–µ–Ω —Ç“Ø—Ä—ñ–Ω—ñ“£ state —Ä–µ—Ç—ñ–Ω–¥–µ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä–¥—ã –±”©–ª—ñ—Å–µ –∞–ª–∞–º—ã–Ω. `command` –∂”ô–Ω–µ `useCommand` “õ–∞–∂–µ—Ç—Ç—ñ–ª—ñ–≥—ñ –Ω–µ?

`useCommand`-—Ç—ã“£ –∞—Ä—Ç—ã“õ—à—ã–ª—ã“ì—ã **_–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–Ω—ã“£ —Å–∞–ª–º–∞“ì—ã —Å–µ–±–µ–±—ñ–º–µ–Ω “õ–∞–π—Ç–∞ –∂–∞—Å–∞–ª–º–∞–π–¥—ã_**

–ë“±–ª `useCommand`-—Ç—ã“£ “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ —Ç“±—Ä–∞“õ—Ç—ã –±–æ–ª“ì–∞–Ω–¥—ã“õ—Ç–∞–Ω. –ë“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `command`-–¥–µ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω —Ñ—É–Ω–∫—Ü–∏—è–ª—ã“õ –∂–æ–ª–∞“õ –∂–∞“£–∞ —Ñ—É–Ω–∫—Ü–∏—è“ì–∞ —Å—ñ–ª—Ç–µ–Ω–≥–µ–Ω–¥—ñ–∫—Ç–µ–Ω –µ—à“õ–∞—à–∞–Ω “õ–∞–π—Ç–∞ –∂–∞—Å–∞–ª–º–∞–π–¥—ã –¥–µ–≥–µ–Ω –º–∞“ì—ã–Ω–∞—Å—ã.

–ë—ñ—Ä–∞“õ “õ–∞–π“ì—ã—Ä–º–∞–π—ã–Ω: `useCommand`-—Ç—ã“£ “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ —Ç“±—Ä–∞“õ—Ç—ã –±–æ–ª—ã–ø —Ç“±—Ä—Å–∞ –¥–∞, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ –∞–ª—ã–Ω“ì–∞–Ω —Ñ—É–Ω–∫—Ü–∏—è —à–∞“õ—ã—Ä—ã–ª“ì–∞–Ω –∫–µ–∑–¥–µ store-–¥–µ–≥—ñ –µ“£ —Å–æ“£“ì—ã —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã —à–∞“õ—ã—Ä—É“ì–∞ –∂–µ—Ç—ñ—Å—Ç—ñ—Ä–µ–¥—ñ.

### Store-event

React-–ø–µ–Ω –∂“±–º—ã—Å —ñ—Å—Ç–µ—É –∫–µ–∑—ñ–Ω–¥–µ —Ç–µ–∫ state-—Ç—ñ“£ –±–æ–ª—É—ã –∫–µ–π–¥–µ –∂–µ—Ç–∫—ñ–ª—ñ–∫—Å—ñ–∑ –±–æ–ª–∞–¥—ã.

–ú—ã—Å–∞–ª—ã, –∑–∞“£—Å—ã–∑ –∫–æ–º–∞–Ω–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä—ñ –µ–Ω–≥—ñ–∑—ñ–ª–≥–µ–Ω –∂–∞“ì–¥–∞–π–ª–∞—Ä –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω, –∂”ô–Ω–µ store-state ”©–∑–≥–µ—Ä–º–µ–π–¥—ñ, –±—ñ—Ä–∞“õ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–Ω—ã“£ —Ç—É—Ä–∞–ª—ã –±—ñ–ª—É—ñ –∫–µ—Ä–µ–∫.

> TypeScript —Ç–µ–∫ –∑–∞“£—Å—ã–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç“Ø—Ä–ª–µ—Ä—ñ–Ω–µ–Ω —Å–∞“õ—Ç–∞–Ω—É“ì–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ–¥—ñ, –±—ñ—Ä–∞“õ –∫–µ–π–±—ñ—Ä –∂–∞“ì–¥–∞–π–ª–∞—Ä–¥–∞ —Ç–µ–∫ –æ—Ä—ã–Ω–¥–∞“ì—ã —Ç–µ–∫—Å–µ—Ä—É–¥—ñ –∂“Ø—Ä–≥—ñ–∑–µ –∞–ª–∞–º—ã–∑, –º—ã—Å–∞–ª—ã, –∫–µ–π–±—ñ—Ä –∂–∞“ì–¥–∞–π–ª–∞—Ä —Å–µ—Ä–≤–µ—Ä–¥—ñ“£ —Ä–∞—Å—Ç–∞—É—ã–Ω —Ç–∞–ª–∞–ø –µ—Ç–∫–µ–Ω –∫–µ–∑–¥–µ.

#### Store-event “õ“±—Ä—É

`create`-–∫–µ “õ–æ—Å–∞, Jagdai store-event-—Ç–∞—Ä–¥—ã “õ“±—Ä—É “Ø—à—ñ–Ω `useEvent` hook-—Ç—ã “õ–∞–º—Ç–∏–¥—ã.

```typescript
import { create, useEvent } from 'jagdai'
```

`useState` –∞—Ä“õ—ã–ª—ã –∫”©—Ä—Å–µ—Ç—ñ–ª–≥–µ–Ω _state_ –¥–µ–≥–µ–Ω–¥—ñ“£ “õ“±—Ä—ã–ª—É—ã–Ω–∞ “±“õ—Å–∞—Å, `useEvent` –∞—Ä“õ—ã–ª—ã _store-event_ “õ“±—Ä—ã–ª—É—ã –º“Ø–º–∫—ñ–Ω. `useEvent` –∞—Ä“õ—ã–ª—ã “õ–∞–π—Ç–∞—Ä—ã–ª–∞—Ç—ã–Ω –º”ô–Ω event-—Ç—ñ –∂—ñ–±–µ—Ä—É “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ª—É“ì–∞ –±–æ–ª–∞–¥—ã.

> ”ò—Ä–µ–∫–µ—Ç—Ç—ñ –∂—ñ–±–µ—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–º–µ–Ω –±—ñ—Ä–≥–µ –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω. –°—ñ–∑–¥—ñ“£ –ø—Ä–æ–µ–∫—Ç—ñ“£—ñ–∑ TypeScript-—Ç—ñ–∫ –∂–æ–±–∞ –º“Ø—à–µ“£–¥—ñ–≥—ñ–Ω–µ –Ω–µ–≥—ñ–∑–¥–µ–ª–≥–µ–Ω –±–æ–ª—Å–∞“£—ã–∑, –ø–∞—Ä–∞–º–µ—Ç—Ä–¥—ñ“£ —Ç“Ø—Ä—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ –∞–ª–∞—Å—ã–∑.

```typescript
export const CounterStore = create(() => {
  const [count, setCount] = useState(0)

  const onUpdateFail = useEvent<string>()

  const update = (value: number) => {
    setCount(value)

    if (value === count) {
      onUpdateFail(`The count is already ${count}`)
    }
  }

  const increase = () => {
    update(count + 1)
  }

  return {
    query: {
      count,
    },
    command: {
      increase,
      update,
    },
    event: {
      onUpdateFail,
    },
  }
})
```

–ú—ã–Ω–¥–∞ ”©–º—ñ—Ä—Å—ñ–∑ `onUpdateFail` **event** –º–µ–Ω `update` **command** “õ–æ—Å–¥—ã“õ.

`update` –±–∞“ì–¥–∞—Ä–ª–∞–º–∞—Å—ã `count`-—Ç—ã `update` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω–µ–Ω –∫–µ–ª–≥–µ–Ω —Å–∞–Ω–¥–∞—Ä–º–µ–Ω –∂–∞“£–∞—Ä—Ç–∞–¥—ã, –∂”ô–Ω–µ `count` –∂”ô–Ω–µ `update` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ –∞–ª–¥—ã–º–µ–Ω –±—ñ—Ä–¥–µ–π –±–æ–ª—Å–∞, `count` –∂–∞“£–∞—Ä—Ç—É“ì–∞ –±–æ–ª–º–∞–π —Ç“±—Ä“ì–∞–Ω—ã–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω (”©–∑—ñ–Ω–∞–Ω —à–∞“õ—ã—Ä—É –∞—Ä“õ—ã–ª—ã) `onUpdateFail` –æ“õ–∏“ì–∞—Å—ã–Ω —à—ã“ì–∞—Ä–∞–¥—ã.

`query` –∂”ô–Ω–µ `command`-“ì–∞ “õ–∞—Ä–∞–π, —Å—ñ–∑ –æ—Å—ã –æ“õ–∏“ì–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ–∫ —Ç“Ø—Ä–¥–µ –∂–∞–∑—ã–ª—É—ã –∫–µ—Ä–µ–∫ –±–æ–ª—Å–∞“£—ã–∑, –æ“õ–∏“ì–∞–Ω—ã `event` –æ–±—å–µ–∫—Ç—ñ–Ω—ñ“£ –∫–µ—Å—Ç–µ—Å—ñ–Ω–µ –±–∞–π–ª–∞—É –∫–µ—Ä–µ–∫.

`create` “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ–Ω–¥–µ `useEvent` ”©—Ä—ñ—Å—ñ –±–∞—Ä, –æ–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥–µ–≥—ñ –¥–µ—Ä–µ–∫—Ç–µ—Ä—Ö–∞–Ω–∞–¥–∞ –æ“õ–∏“ì–∞–ª–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–∞–¥—ã.

#### store-event-“ì–∞ –∂–∞–∑—ã–ª—É

`create` “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ–Ω—ñ“£ `useEvent` ”©—Ä—ñ—Å—ñ –µ–∫—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä “õ–∞–∂–µ—Ç:

1. Event –∞—Ç–∞—É—ã, –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ `create` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω—ñ“£ “õ–∞–π—Ç–∞—Ä“ì–∞–Ω `event` –æ–±—ä–µ–∫—Ç—ñ–Ω—ñ“£ ”©—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω–µ–Ω –±—ñ—Ä—ñ.
2. Event —Ç—ã“£–¥–∞—É—à—ã —Ñ—É–Ω–∫—Ü–∏—è—Å—ã.

```jsx
const Controls = () => {
  const { increase, update } = CounterStore.useCommand()

  CounterStore.useEvent('onUpdateFail', (arg) => {
    console.log(arg)
  })

  const [input, setInput] = useState(0)

  return (
    <>
      <input
        type="number"
        onChange={(e) => {
          setInput(parseInt(e.target.value, 10))
        }}
      />
      <button onClick={() => update(input)}>update to {input}</button>
      <button onClick={increase}>+</button>
    </>
  )
}
```

`useEvent` –∞—Ä“õ—ã–ª—ã –∞–Ω—ã“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞—Ç—ã–Ω _event_-–∫–µ store —ñ—à—ñ–Ω–µ–Ω –¥–µ —Ç—ñ—Ä–∫–µ–ª—É–≥–µ –±–æ–ª–∞–¥—ã, ”ô—Ä—ñ –æ“ì–∞–Ω —Ç—ã“£–¥–∞—É—à—ã —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –∞—Ä–≥—É–º–µ–Ω—Ç —Ä–µ—Ç—ñ–Ω–¥–µ “±—Ç—ã—Å—Ç—ã—Ä—É “Ø—à—ñ–Ω –∫”©–±—ñ—Ä–µ–∫ “õ–∞—Ä–∞–ø–∞–π—ã–º:

–¢–µ–∫ `useEvent` –∞—Ä“õ—ã–ª—ã _event_-—Ç—ñ –∞–Ω—ã“õ—Ç–∞—É“ì–∞ –∫–µ–ª–≥–µ–Ω –∫–µ–∑–¥–µ, –æ–ª “Ø—à—ñ–Ω —Ç—ã“£–¥–∞—É—à—ã —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä —Ä–µ—Ç—ñ–Ω–¥–µ —Ç–∞–Ω—ã—Å—Ç—ã—Ä—É “õ–∞–∂–µ—Ç.

```typescript
const onUpdateFail = useEvent((reason: string) => {
  console.log(`Update failed, the reason is ${reason}`)
})
```

---

### –ë—ñ—Ä–¥–µ–Ω –±—ñ—Ä–Ω–µ—à–µ state –ª–∞—Ä–¥—ã –±–∞“õ—ã–ª–∞—É

#### –ü—Ä–∏–º–∏—Ç–∏–≤—Ç—ñ —Ç–∏–ø—Ç–µ—Ä

```typescript
const income = EmployeeStore.useQuery((query) => query.salary + query.bonus)
```

–ï–≥–µ—Ä `query.salary` –Ω–µ–º–µ—Å–µ `query.bonus` ”©–∑–≥–µ—Ä—Å–µ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ“£ “õ–∞–π—Ç–∞ –∂“Ø–∫—Ç–µ–ª—É—ñ–Ω —Ç—É–¥—ã—Ä–∞–¥—ã.

#### –ë–µ—Ç–∫—ñ —Å–∞–ª—ã—Å—Ç—ã—Ä—É

–ö”©–ø—Ç–µ–≥–µ–Ω –º–µ–º–ª–µ–∫–µ—Ç—Ç–µ—Ä –æ–±—ä–µ–∫—Ç —Ç“Ø—Ä—ñ–Ω–¥–µ –±—ñ—Ä—ñ–∫—Ç—ñ—Ä—ñ–ª–≥–µ–Ω –∫–µ–∑–¥–µ “õ–∞–π—Ç–∞—Ä—ã–ª–∞–¥—ã, `jagdai` –±–µ—Ç–∫—ñ —Å–∞–ª—ã—Å—Ç—ã—Ä—É –∞—Ä“õ—ã–ª—ã –∂–∞“£–∞—Ä—Ç—É–ª–∞—Ä–¥—ã –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω `useShallow` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω “±—Å—ã–Ω–∞–¥—ã. “ö–æ–ª–¥–∞–Ω—É –º—ã–Ω–∞–¥–∞–π:

```typescript
import { useShallow } from 'jagdai'

const [phone, email] = UserStore.useQuery(
  useShallow((query) => [query.phone, query.email]),
)
```

–ï–≥–µ—Ä `query.phone` –Ω–µ–º–µ—Å–µ `query.email` ”©–∑–≥–µ—Ä—Å–µ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ“£ “õ–∞–π—Ç–∞ –∂“Ø–∫—Ç–µ–ª—É—ñ–Ω —Ç—É–¥—ã—Ä–∞–¥—ã.

```typescript
import { useShallow } from 'jagdai'

const { name, age } = UserStore.useQuery(
  useShallow((query) => ({
    name: `${query.firstName} ${query.lastName}`,
    age: query.age,
  })),
)
```

–ï–≥–µ—Ä `query.firstName`, `query.lastName`, –Ω–µ–º–µ—Å–µ `query.age` ”©–∑–≥–µ—Ä—Å–µ, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ“£ “õ–∞–π—Ç–∞ –∂“Ø–∫—Ç–µ–ª—É—ñ–Ω —Ç—É–¥—ã—Ä–∞–¥—ã.

”ò–¥–µ–ø–∫—ñ–¥–µ, useQuery ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä–¥—ñ –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω `Object.is(old, new)` “õ–∞—Ç–∞“£ —Ç–µ“£–¥—ñ–∫ —Å–∞–ª—ã—Å—Ç—ã—Ä—É—ã–Ω “õ–æ–ª–¥–∞–Ω–∞–¥—ã.

- `jagdai`-–¥–∞, `useShallow` `useQuery` –∂”ô–Ω–µ –±–µ—Ç–∫—ñ —Å–∞–ª—ã—Å—Ç—ã—Ä—É ”ô–¥—ñ—Å—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É –∞—Ä“õ—ã–ª—ã “õ–∞–π—Ç–∞ –∂“Ø–∫—Ç–µ–ª—É —à–µ—à—ñ–º—ñ–Ω “õ–∞–±—ã–ª–¥–∞—É “Ø—à—ñ–Ω “±—Å—ã–Ω—ã–ª–∞–¥—ã.

- –ö“Ø—Ä–¥–µ–ª—ñ –∂–∞“ì–¥–∞–π–ª–∞—Ä “Ø—à—ñ–Ω, `useQuery` –µ–∫—ñ–Ω—à—ñ “õ–æ—Å—ã–º—à–∞ –∞—Ä–≥—É–º–µ–Ω—Ç “±—Å—ã–Ω–∞–¥—ã, –æ–ª —Å—ñ–∑–≥–µ ”ô–¥–µ–ø–∫—ñ –º—ñ–Ω–µ–∑-“õ“±–ª—ã“õ—Ç—ã ”©–∑–≥–µ—Ä—Ç—É “Ø—à—ñ–Ω —Å–∞–ª—ã—Å—Ç—ã—Ä—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω —Ç–µ“£—à–µ—É–≥–µ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ–¥—ñ.

---

## –ò–Ω—Å–ø–∏—Ä–∞—Ç—Ü–∏—è–ª—ã“õ –º”ô–Ω–µ—Ä

- [Remesh](https://github.com/remesh-js/remesh) `query`, `command` –∂”ô–Ω–µ `event` “±—Å—ã–Ω—É–ª–∞—Ä—ã–Ω—ã“£ –¥–∏–∑–∞–π–Ω—ã–Ω–¥–∞ Jagdai Remesh-—Ç—ñ “õ“±—Ä—ã–ª“ì–∞–Ω–Ω–∞–Ω –∫”©–ø—Ç–µ–≥–µ–Ω —Å—ã–∑—ã“õ—Ç–∞—Ä—ã –±–∞—Ä. –®–∞—Ä—Ç—Ç–∞—Ä —Ç—É—Ä–∞ –∂“Ø—Ä–≥–µ–Ω–¥–µ, –∞—Ä–Ω–∞–π—ã –∂–æ–±–∞–ª–∞—Ä–¥—ã –∂–µ—Ç—ñ–ª–¥—ñ—Ä—É–≥–µ “Ø–ª–∫–µ–Ω –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ—Ç—ñ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç—ñ, –∫“Ø—à—Ç—ñ –∂”ô–Ω–µ –∫”©–±—ñ—Ä–µ–∫ Remesh —Å—ñ–∑–¥—ñ“£ —Ç–∞“£–¥–∞—É—ã“£—ã–∑ –±–æ–ª–º–∞“ì–∞–Ω–¥–∞ –∂–∞“õ—Å—ã –±–æ–ª–∞–¥—ã.

- [Hox](https://github.com/umijs/hox) Jagdai “õ“±—Ä—É–¥—ã“£ —Å–µ–±–µ–±—ñ - —Å—Ç–µ–π—Ç –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Å—ã–Ω “õ–æ–ª–¥–∞–Ω–±–∞–π—Ç—ã–Ω –∂–æ–±–∞ –±–æ–ª–¥—ã –∂”ô–Ω–µ –∂–∏—ñ “õ–∞–π—Ç–∞–¥–∞–Ω –∂–∞—Ä–∏—è–ª–∞–Ω—É–ª–∞—Ä –∫”©–±—ñ–Ω–µ—Å–µ —Ç–∏—ñ–º–¥—ñ –µ–º–µ—Å –∂–∞“ì–¥–∞–π–¥–∞, —Ç”©–º–µ–Ω –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É—ã “õ–∞–∂–µ—Ç –±–æ–ª–¥—ã. –û–Ω—ã“£ —É–∞“õ—ã—Ç—à–∞“ì–∞–Ω –∂–∞—É–∞–ø“õ–∞ –Ω—ã—Å–∞–Ω—ã –±–æ–ª—Å–∞, Hox —Ç—É—Ä–∞–ª—ã –±—ñ–ª–≥—ñ–º—ñ–∑ –±–æ–ª—Å–∞, Jagdai –∂–∞—Å–∞–ª–º–∞“ì–∞–Ω –±–æ–ª–∞—Ä –µ–¥—ñ. –û“ì–∞–Ω “õ–æ—Å–∞, Store –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–Ω—ñ“£ —ñ—à—ñ–Ω–¥–µ —Ç–µ–∑ “õ–∞–π—Ç–∞ –ø–∞–π–¥–∞–ª–∞–Ω—É –∂–∞“ì–¥–∞–π—ã–Ω—ã“£ —à–µ—à—ñ–º—ñ–Ω –¥–µ Hox-—Ç–∞–Ω –∞–ª–¥—ã–Ω –∞–ª—É –∫–µ—Ä–µ–∫ –±–æ–ª–¥—ã.

- [Zustand](https://github.com/pmndrs/zustand) Zustand-—Ç—ã“£ selector —Å—Ç–∏–ª—å–¥—ñ API-—Å—ã `useQuery`-–Ω—ã“£ –¥–∏–∑–∞–π–Ω—ñ–Ω–µ –º“Ø–Ω–¥–µ–ª—ñ–∫ –±–æ–ª–¥—ã.
