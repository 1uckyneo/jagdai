# Jagdai

[English] | [‰∏≠Êñá] | “ö–∞–∑–∞“õ—à–∞üá∞üáø

[English]: ./README.md
[‰∏≠Êñá]: ./README_zh_CN.md
[“ö–∞–∑–∞“õ—à–∞üá∞üáø]: ./README_kk_KZ.md

[![npm version](https://img.shields.io/npm/v/jagdai.svg?logo=npm)](https://www.npmjs.com/package/jagdai)
[![bundle size](https://img.shields.io/bundlephobia/minzip/jagdai.svg?label=bundle%20size&logo=javascript)](https://www.npmjs.com/package/jagdai)
![React](https://img.shields.io/npm/dependency-version/jagdai/peer/react?logo=react)

> –ë“±–ª, React state –∂”ô–Ω–µ event –±–∞—Å“õ–∞—Ä—É–¥—ã –±–∞“õ—ã–ª–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–ª—ã —à–µ—à—ñ–º–¥—ñ “Ø–π—Ä–µ–Ω—É –º“Ø–ª–¥–µ–º—Å—ã–∑ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞.

## Jagdai –¥–µ–≥–µ–Ω –Ω–µ?

Jagdai(–¥—ã–±—ã—Å—ã `/ í…ë Åd…ëj/`, –ñ–∞“ì–¥–∞–π) –ë“±–ª, React state –∂”ô–Ω–µ event –±–∞—Å“õ–∞—Ä—É–¥—ã –±–∞“õ—ã–ª–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–ª—ã —à–µ—à—ñ–º–¥—ñ “Ø–π—Ä–µ–Ω—É –º“Ø–ª–¥–µ–º—Å—ã–∑ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞.

- –¢”ô—Ä—Ç—ñ–ø—Ç—ñ–∫ React Hook API –ª–∞—Ä—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É“ì–∞ –±—ñ–ª–≥–µ–Ω–¥–µ ”ô–¥—ñ—Å—ñ–º–µ–Ω “Ø–π—Ä–µ–Ω—É “õ–∏—ã–Ω –µ–º–µ—Å, –∫”©–ø—Ç–µ–≥–µ–Ω –∫—ñ—Ä—É-—à—ã“ì—É–ª–∞—Ä–¥–∞ “õ–æ–ª–∞–π–ª—ã.
- –°—Ç–∞—Ç—É—Å –±–∞“õ—ã–ª–∞—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–ª–∞—Ä—ã–Ω “õ–æ–ª–¥–∞–Ω–±–∞—Å–∞“£—ã–∑ –¥–∞, ”ô—Ä–µ–∫–µ—Ç—Ç—ñ–ª—ñ–∫—Ç—ñ –º–æ–ª–∞–π—Ç—ã–Ω –∂–∞“£–∞—Ä—Ç—É –∂–æ–±–∞–ª–∞—Ä—ã–Ω –æ“£—Ç–∞–π–ª—ã –¥–∞–π—ã–Ω–¥–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥—ñ“£ –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã –æ“£–∞–π –∂”ô–Ω–µ “õ–∏—ã–Ω—Å“±—Ä–∞–ø—Å—ã–∑ event –±–∞“õ—ã–ª–∞—É –∂–æ–ª–¥–∞—Ä—ã.
- ”®—Ç–µ –∂–∞“õ—Å—ã TypeScript —Ç“Ø—Ä–ª—ñ–∫—Ç—ñ—Ä—É–¥—ñ –±–∞—Ä–ª–∞–¥—ã.

## –û–Ω—ã Codesandbox-—Ç–∞ —Å—ã–Ω–∞“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.

[![Edit](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/p/sandbox/jagdai-counter-demo-6mbbt3?file=%2Fsrc%2Fstore%2FcounterStore.ts)

## –û—Ä–Ω–∞—Ç—É

```base
npm install jagdai
```

## “ö–æ–ª–¥–∞–Ω—É

### Store “õ“±—Ä—ã“£—ã–∑

–ê–ª–¥—ã–Ω–¥–∞ `jagdai` –ø–∞–∫–µ—Ç—ñ–Ω–µ–Ω –±–µ—Ä—ñ–ª–≥–µ–Ω `create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω “õ–æ–ª–¥–∞–Ω–∞ –æ—Ç—ã—Ä—ã–ø `store` “õ“±—Ä—ã“£—ã–∑.

create —Ñ—É–Ω–∫—Ü–∏—è—Å—ã ”©–∑–≥–µ—Ä—Ç—ñ–ª–≥–µ–Ω React Hook-—Ç—ã “õ–æ–ª–¥–∞–Ω—É“ì–∞ –º“Ø–ª–¥–µ–º –∫–µ—Ä–µ–∫ –µ—Ç–µ–¥—ñ, –±“±–ª `store` “õ“±—Ä–∞–º—ã–Ω –∞–Ω—ã“õ—Ç–∞–π—Ç—ã–Ω Hook.

–ë“±–ª —Å–µ–±–µ–ø—Ç—ñ, —Ñ—É–Ω–∫—Ü–∏—è —ñ—à—ñ–Ω–¥–µ `useState` —Å–∏—è“õ—Ç—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç—Ç—ã React API-–ª–∞—Ä—ã–Ω “õ–æ–ª–¥–∞–Ω—É –∞—Ä“õ—ã–ª—ã store –º”ô—Ä—Ç–µ–±–µ—Å—ñ–Ω –∞–Ω—ã“õ—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã.

```typescript
import { create } from 'jagdai'
import { useState } from 'react'

export const { Store: CounterStore, useQuery: useCounterQuery } = create(() => {
  const [count, setCount] = useState(0)

  return {
    query: {
      count,
    },
  }
})
```

`create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ —Ä–µ—Ç—ñ–Ω–¥–µ “õ–∞–±—ã–ª–¥–∞–Ω“ì–∞–Ω Hook-—Ç—ã“£ “õ–∞–π—Ç–∞“õ –∂–æ–ª—ã–Ω–¥–∞ —Ç–∞–±—ã—Å—Ç—ã –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç–∞–ª–∞–ø—Ç–∞—Ä—ã –±–∞—Ä:

1. –ë—ñ—Ä—ñ–Ω—à—ñ —Ä–µ—Ç, –æ–Ω—ã“£ “õ–∞–π—Ç–∞—Ä—ã–º—ã –Ω—ã—Å–∞–Ω–¥—ã –±–æ–ª—É—ã –∫–µ—Ä–µ–∫
2. –ï–≥–µ—Ä —Å—ñ–∑ –±—ñ—Ä–Ω–µ—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã –±”©–ª—ñ–Ω–µ—Ç—ñ–Ω –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –±”©–ª—ñ—Å—É –∫–µ—Ä–µ–∫ –±–æ–ª—Å–∞“£—ã–∑, –æ–Ω–¥–∞ `query` –∞—É–º–∞“ì—ã “Ø—à—ñ–Ω –Ω—ã—Å–∞–Ω–Ω—ã“£ –æ–±—ä–µ–∫—Ç—ñ–Ω –∫”©—Ä—Å–µ—Ç—É—ñ“£—ñ–∑ –∫–µ—Ä–µ–∫ –∂”ô–Ω–µ –±”©–ª—ñ—Å–µ—Ç—ñ–Ω –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –±—ñ—Ä–±—ñ—Ä—ñ–Ω–µ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä—É—ã“£—ã–∑ –∫–µ—Ä–µ–∫, –æ–ª–∞—Ä–¥—ã“£ –±–µ—Ç–±–µ–ª–≥—ñ–ª–µ—Ä—ñ–º–µ–Ω —Å“±—Ä–∞—É –∂”ô–Ω–µ –∂–∞–∑—ã–ª—É—ã –º“Ø–º–∫—ñ–Ω –±–æ–ª–∞–¥—ã.

---

### –ñ–æ–ª–∞—É–¥—ã“£ “õ“±—Ä—ã–ª—É—ã–Ω –±–∞“ì–¥–∞—Ä–ª–∞—É

`create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã –æ–±—ä–µ–∫—Ç “õ–∞–π—Ç–∞—Ä–∞–¥—ã, –æ–Ω—ã“£ Store —Ç”©—Ä—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã.

> –ë“±–ª –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ“£ –ø–∞–π–¥–∞–ª–∞–Ω—É —Å—Ü–µ–Ω–∞—Ä–∏–π—ñ–Ω–µ —Å”ô–π–∫–µ—Å –æ–Ω—ã `CounterStore` –¥–µ–ø –∞—Ç—ã–Ω–¥–∞—É—ã“£—ã–∑“ì–∞ –±–æ–ª–∞–¥—ã (—Å—ñ–∑ –¥–µ —Å–æ–ª –∂–∞—Å–∞—É—ã“£—ã–∑ –∫–µ—Ä–µ–∫).

`CounterStore` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–Ω—ñ React –¥–µ—Ä–µ–≤–µ—Å—ñ–Ω—ñ“£ –Ω–æ–¥—ã–Ω–∞ —Å–∞–ª—É—ã“£—ã–∑ –∫–µ—Ä–µ–∫.

```jsx
const CounterApp = () => {
  return (
    <CounterStore>
      <Count />
      <Controls />
    </CounterStore>
  )
}
```

–¢–µ–∫ –∫–µ–ª–µ—Ç—ñ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä –º–µ–Ω –¥“±—Ä—ã—Å “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–¥–∞, `query`-–¥–∞ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω “õ–æ–ª–¥–∞–Ω–±–∞–Ω—ã –ø–∞–π–¥–∞–ª–∞–Ω—É –º“Ø–º–∫—ñ–Ω.

### State-–¥—ñ —ñ–∑–¥–µ–ø —Ç“±—Ä—É –∂”ô–Ω–µ “õ–æ–ª–¥–∞–Ω—É

`create` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω–∞–Ω –∫–µ–ª–≥–µ–Ω –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä–≥–µ “õ–æ—Å—ã–º—à–∞ “õ–∞–π—Ç–∞—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ —Ä–µ—Ç—ñ–Ω–¥–µ –±–µ—Ä—ñ–ª–≥–µ–Ω `useQuery` –∫–µ—Å—Ç–µ—Å—ñ - –±“±–ª React Hook, –æ–ª –°—Ç–æ—Ä-–¥–∞ –∞–Ω—ã“õ—Ç–∞–ª“ì–∞–Ω `query` –∫–µ—Å—Ç–µ—Å—ñ–Ω–¥–µ–≥—ñ –º”ô–Ω–¥–µ—Ä–¥—ñ —Å“±—Ä–∞—É –∂”ô–Ω–µ –ø–∞–π–¥–∞–ª–∞–Ω—É“ì–∞ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ–¥—ñ.

–°—ñ–∑ –æ“ì–∞–Ω —Å“±–∑–¥–∞–ø ”©—Ç—É—à—ñ–Ω ”©—Ç—ñ–Ω—É—ñ“£—ñ–∑ –∫–µ—Ä–µ–∫, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –æ–ª –∂–∞–∑—ã–ª“ì–∞–Ω —Å—Ç–µ–π—Ç-—Ç–µ—Ä—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—ñ—Å—ñ–Ω –∂”ô–Ω–µ ”©–∑—ñ –¥–µ ”©–∑–≥–µ—Ä—ñ—Å –µ—Ç—ñ–ø —Ç–∞–±—ã–ª–º–∞–π –∂–∞—Ç“õ–∞–Ω —Å—Ç–µ–π—Ç-—Ç–µ—Ä—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—ñ—Å—ñ–Ω –∫”©–∑–¥–µ—Ä—ñ–Ω—ñ“£ –∞—É–¥–∞—Ä—É—ã–Ω –∫”©—Ä—É –∞—Ä“õ—ã–ª—ã –æ—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ “õ–∞–π—Ç–∞-–∂–∞—Å–∞—É“ì–∞ —Ç–∞–±—ã—Å –±–æ–ª–∞–¥—ã.

> –ú—ã—Å–∞–ª—ã, `useQuery` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã `CounterStore`-–º–µ–Ω “õ–æ—Å—ã–ª“ì–∞–Ω, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –æ–Ω—ã `useCounterQuery` —Ä–µ—Ç—ñ–Ω–¥–µ –∞—Ç–∞“õ—Ç–∞“£—ã–∑ (–°—ñ–∑ –¥–µ –æ—Å—ã–Ω–¥–∞“ì—ã –º“Ø–º–∫—ñ–Ω–¥—ñ–∫—Ç–µ—Ä–¥—ñ –ø–∞–π–¥–∞–ª–∞–Ω—É—ã“£—ã–∑ –∫–µ—Ä–µ–∫).

–ú—ã—Å–∞–ª—ã, `query` –∫–µ—Å—Ç–µ—Å—ñ–Ω–¥–µ `count` —Ç—É—Ä–∞–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω –±–∞—Å“õ–∞ —Å—Ç–µ–π—Ç—Ç–µ—Ä–≥–µ –∂–∞–∑—ã–ª“ì–∞–Ω –∂–∞—É–∞–ø—Ç—ã “õ–∞–π—Ç—ã–ø –∫”©—Ä—É–≥–µ –±–æ–ª–∞–¥—ã, —Ç–µ–∫ `count` ”©–∑–≥–µ—Ä–≥–µ–Ω –∫–µ–∑–¥–µ –±“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç “õ–∞–π—Ç–∞-–∂–∞—Å–∞–ª–∞–¥—ã.

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ—à—ñ–Ω–¥–µ store-“ì–∞ –∫–æ–º–∞–Ω–¥–∞ –∂—ñ–±–µ—Ä—É

Store-–¥—ñ –∞–Ω—ã“õ—Ç–∞—É –º”ô–Ω–¥–µ—Ä—ñ `query` –∫”©—Ä—Å–µ—Ç—É—ñ–Ω–µ–Ω —Ç”ô—É–µ–∫–µ–ª–¥—ñ, `command` –∫”©—Ä—Å–µ—Ç—É–≥–µ –¥–µ –±–æ–ª–∞–¥—ã, –±“±–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥—ñ“£ Store-“ì–∞ –∂—ñ–±–µ—Ä–µ –∞–ª–∞—Ç—ã–Ω –±“±–π—Ä—ã“õ—Ç–∞—Ä—ã–Ω –±–µ–ª–≥—ñ–ª–µ–π–¥—ñ.

–ú—ã—Å–∞–ª—ã, ”©–∑—ñ–Ω—ñ“£ —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ —Ç—ñ–ª—ñ–Ω–¥–µ –∫–µ“£–µ–π—Ç—É “Ø—à—ñ–Ω —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –∞–Ω—ã“õ—Ç–∞–ø, –æ–Ω—ã `command` –∫”©—Ä—Å–µ—Ç—É—ñ–Ω–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã.

`create` –∞—Ä“õ—ã–ª—ã “õ–∞–π—Ç–∞—Ä—ã–ª–∞—Ç—ã–Ω –Ω—ã—Å–∞–Ω–¥–∞ `useCommand` –∞–π–º–∞“ì—ã –¥–∞ –±–∞—Ä, –±“±–ª —Å—ñ–∑–≥–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ store-“ì–∞ –±“±–π—Ä—ã“õ—Ç–∞—Ä–¥—ã –∂—ñ–±–µ—Ä—É –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ–Ω –±–µ—Ä–µ—Ç—ñ–Ω Hook.

```typescript
export const {
  Store: CounterStore,
  useQuery: useCounterQuery,
  useCommand: useCounterCommand,
} = create(() => {
  const [count, setCount] = useState(0)

  const increase = () => {
    setCount(count + 1)
  }

  return {
    query: {
      count,
    },
    command: {
      increase,
    },
  }
})
```

> `useCommand` –∂–∞“£–∞–¥–∞–Ω `CounterStore` –º–µ–Ω—ñ“£–¥–µ—Ä—ñ–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã—Ä—É—ã –º“Ø–º–∫—ñ–Ω, —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –æ–Ω—ã `useCounterCommand` —Ç“Ø—Ä—ñ–Ω–µ ”©–∑–≥–µ—Ä—Ç—É—ñ–º—ñ–∑ –∫–µ—Ä–µ–∫ (—Å—ñ–∑ –¥–µ –æ“ì–∞–Ω –æ“£–∞–π ”©–∑–≥–µ—Ä—Ç—É—ñ“£—ñ–∑ –∫–µ—Ä–µ–∫).

```jsx
const Controls = () => {
  const { increase } = useCounterCommand()

  return <button onClick={increase}>+</button>
}
```

–ë–∞—Å“õ–∞—Ä–º–∞–¥–∞“ì—ã `count` –æ—Ä–Ω–∞—Ç—ã–ª“ì–∞–Ω–¥–∞, ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä –º–µ–Ω–º–µ–Ω –∂”ô–Ω–µ `increase` –Ω“±—Å“õ–∞—Å—ã –æ—Ä—ã–Ω–¥–∞–ª—ã–ø, –±–∞—Å—Ç–∞—É—à—ã–¥–∞“ì—ã –±–∞—Å—ã–ª“ì–∞–Ω –∫–µ–∑–¥–µ `count` –∂–∞“£–∞—Ä—Ç—ã–ª–∞–¥—ã.

–û–ª–∞—Ä–¥—ã“£ –∫–µ–π–±—ñ—Ä—ñ “õ“±—Ä–∞–º—ã–Ω–¥–∞ `count` “õ–æ–ª–¥–∞–Ω–±–∞—Å—ã–Ω–∞ `useCounterQuery` –∞—Ä“õ—ã–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω –±–æ–ª—Å–∞“£—ã–∑, —Å–æ“ì—ã—Å—ã –∂–∞“£–∞—Ä—Ç—ã–ª–∞–¥—ã –∂”ô–Ω–µ —Å–æ“£“ì—ã `count` –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –∞–ª—É “Ø—à—ñ–Ω ”©–∑—ñ–Ω—ñ“£ “õ–∞–π—Ç–∞ ”©“£–¥–µ—É—ñ–Ω –æ—Ä—ã–Ω–¥–∞–π–¥—ã.

---

### “ö–∞–ª–∞–π—Å—ã–∑–¥–∞–Ω `command`-`useCommand` “õ–∞–∂–µ—Ç?

> `query` –∂”ô–Ω–µ `useQuery` –∂–∏–Ω–∞“ì—ã–º–µ–Ω, –º–µ–Ω —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä–¥—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–º–µ–Ω –±”©–ª—ñ—Å—É–≥–µ –±–æ–ª–∞–¥—ã. –°–æ–Ω–¥—ã“õ—Ç–∞–Ω, –±—ñ–∑–¥–µ “õ–∞–ª–∞–π `command` –∂”ô–Ω–µ `useCommand` “õ–∞–∂–µ—Ç?

`useCommand` –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ –±“±–ª: **_–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–Ω—ã–º–µ–Ω “õ–∞–π—Ç–∞ “õ“±—Ä—É—à—ã–ª—ã“õ —Ç—É—ã–Ω–¥–∞—É—ã –º“Ø–º–∫—ñ–Ω –µ–º–µ—Å_**

–ë“±–ª —Å–µ–±–µ–±—ñ `useCommand` “õ–∞–π—Ç–∞–ª–∞–Ω—É –º”ô–Ω—ñ —Å–∞–ø–∞–ª—ã. –ë“±–ª, `command` “õ“±—Ä—ã–ª“ì–∞–Ω —Ñ—É–Ω–∫—Ü–∏—è ”©—Ä—ñ—Å—Ç–µ—Ä—ñ –∂–∞“£–∞ —Ñ—É–Ω–∫—Ü–∏—è“ì–∞ –±–∞—É–ª–∞–Ω–¥—ã—Ä—É –∫–µ–∑—ñ–Ω–¥–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç “õ–∞–π—Ç–∞ “õ“±—Ä—É–ª–º–∞“ì–∞–Ω—ã–Ω –º–∞“£—ã–∑–¥—ã

–ë—ñ—Ä–∞“õ –æ–π–ª–∞–Ω–±–∞“£—ã–∑: `useCommand` “õ–∞–π—Ç–∞–ª–∞–Ω—É –º”ô–Ω—ñ —Å–∞–ø–∞–ª—ã –±–æ–ª—Å–∞ –¥–∞, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ –∞–ª—ã–Ω“ì–∞–Ω —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä –∂“Ø–π–µ–¥–µ–≥—ñ —Å–æ“£“ì—ã —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã —à–∞“õ—ã—Ä—É–¥–∞ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.

### Store event

React –ø–∞–π–¥–∞–ª–∞–Ω—ã–ø –∂–æ–±–∞ “õ“±—Ä—É –ø—Ä–æ—Ü–µ—Å—ñ–Ω–¥–µ, –∫–µ–π–±—ñ—Ä —Å–∏—Ç—É–∞—Ü–∏—è–ª–∞—Ä–¥–∞ —Ç–µ–∫ state “õ–∞—Ä–∞–π—Å—ã–∑ –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω –µ–º–µ—Å.

–ú—ã—Å–∞–ª—ã, –∫–µ–ª–µ—Å—ñ —Å—Ü–µ–Ω–∞—Ä–∏–ª–µ—Ä–¥–µ, –∫–µ–ª–µ—Å—ñ “õ–∞–¥–∞–º–¥—ã“õ –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–¥—ñ –µ–Ω–≥—ñ–∑—É, Store –º”ô–Ω—ñ ”©–∑–≥–µ—Ä–º–µ–π –∞–ª–º–∞—Å–∞ –¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–Ω—ã —Ç“Ø—Å—ñ–Ω—É—ñ –∫–µ—Ä–µ–∫.

> TypeScript —Ç–µ–∫ “õ–∞—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç“Ø—Ä–ª–µ—Ä—ñ–Ω –∫–µ—Ä—ñ “õ–æ—é“ì–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ –¥–µ, –±”ô–∑—ñ —Å—Ü–µ–Ω–∞—Ä–∏–ª–µ—Ä–¥–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞—Å—Ç–∞—É “õ–∞–∂–µ—Ç –±–æ–ª“ì–∞–Ω–¥–∞ —Ç–µ–∫—Å–µ—Ä—É—ñ–º—ñ–∑ “õ–∞–∂–µ—Ç.

#### Store Event “õ“±—Ä—É

`create`-–¥–∞–Ω –±–∞—Å“õ–∞, Jagdai `useStoreEvent` —Ö—É“õ—É“ì—ã–Ω –¥–∞ “õ–∞–º—Ç—ã–ø –∞–ª–∞–¥—ã, store-event –∂–∞—Å–∞—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–∞–¥—ã.

```typescript
import { create, useStoreEvent } from 'jagdai'
```

–°—ñ–∑ —Å—ñ–∑–¥—ñ“£ store-–Ω—ã“£ —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω–¥–∞ `useStoreEvent` –ø–∞–π–¥–∞–ª–∞–Ω–∞ –æ—Ç—ã—Ä—ã–ø **store-event** “õ“±—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã“£—ã–∑, –æ–Ω—ã“£ “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ –±“±–ª –æ“õ–∏“ì–∞–Ω—ã –∂—ñ–±–µ—Ä—É “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.

> ”ò—Ä–µ–∫–µ—Ç—Ç—ñ –∂—ñ–±–µ—Ä—É –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–º–µ–Ω –±—ñ—Ä–≥–µ –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω. –°—ñ–∑–¥—ñ“£ –ø—Ä–æ–µ–∫—Ç—ñ“£—ñ–∑ TypeScript-—Ç—ñ–∫ –∂–æ–±–∞ –º“Ø—à–µ“£–¥—ñ–≥—ñ–Ω–µ –Ω–µ–≥—ñ–∑–¥–µ–ª–≥–µ–Ω –±–æ–ª—Å–∞“£—ã–∑, –ø–∞—Ä–∞–º–µ—Ç—Ä–¥—ñ“£ —Ç“Ø—Ä—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ –∞–ª–∞—Å—ã–∑.

```typescript
export const {
  Store: CounterStore,
  useQuery: useCounterQuery,
  useCommand: useCounterCommand,
  useEvent: useCounterEvent,
} = create(() => {
  const [count, setCount] = useState(0)

  const updateFail = useStoreEvent<string>()

  const update = (value: number) => {
    setCount(value)

    if (value === count) {
      updateFail(`The count is already ${count}`)
    }
  }

  const increase = () => {
    update(count + 1)
  }

  return {
    query: {
      count,
    },
    command: {
      increase,
      update,
    },
    event: {
      updateFail,
    },
  }
})
```

–ú—ã–Ω–¥–∞ ”©–º—ñ—Ä—Å—ñ–∑ `updateFail` **event** –º–µ–Ω `update` **command** “õ–æ—Å–¥—ã“õ.

`update` –±–∞“ì–¥–∞—Ä–ª–∞–º–∞—Å—ã `count`-—Ç—ã `update` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω–µ–Ω –∫–µ–ª–≥–µ–Ω —Å–∞–Ω–¥–∞—Ä–º–µ–Ω –∂–∞“£–∞—Ä—Ç–∞–¥—ã, –∂”ô–Ω–µ `count` –∂”ô–Ω–µ `update` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ –∞–ª–¥—ã–º–µ–Ω –±—ñ—Ä–¥–µ–π –±–æ–ª—Å–∞, `count` –∂–∞“£–∞—Ä—Ç—É“ì–∞ –±–æ–ª–º–∞–π —Ç“±—Ä“ì–∞–Ω—ã–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω (”©–∑—ñ–Ω–∞–Ω —à–∞“õ—ã—Ä—É –∞—Ä“õ—ã–ª—ã) `updateFail` –æ“õ–∏“ì–∞—Å—ã–Ω —à—ã“ì–∞—Ä–∞–¥—ã.

`query` –∂”ô–Ω–µ `command`-“ì–∞ “õ–∞—Ä–∞–π, —Å—ñ–∑ –æ—Å—ã –æ“õ–∏“ì–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç—ñ–∫ —Ç“Ø—Ä–¥–µ –∂–∞–∑—ã–ª—É—ã –∫–µ—Ä–µ–∫ –±–æ–ª—Å–∞“£—ã–∑, –æ“õ–∏“ì–∞–Ω—ã `event` –æ–±—å–µ–∫—Ç—ñ–Ω—ñ“£ –∫–µ—Å—Ç–µ—Å—ñ–Ω–µ –±–∞–π–ª–∞—É –∫–µ—Ä–µ–∫.

`create` “õ–∞–π—Ç–∞—Ä—É –º”ô–Ω—ñ–Ω–¥–µ `useEvent` ”©—Ä—ñ—Å—ñ –±–∞—Ä, –æ–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Ç–µ—Ä–¥–µ–≥—ñ –¥–µ—Ä–µ–∫—Ç–µ—Ä—Ö–∞–Ω–∞–¥–∞ –æ“õ–∏“ì–∞–ª–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–∞–¥—ã.

> –î”ô–π–µ–∫—ñ –æ–π—ã–Ω—à—ã“õ –±–æ–π—ã–Ω—à–∞, –æ—Å—ã–Ω–¥–∞ –æ–ª `useCounterEvent` –¥–µ–ø –∞—Ç—ã–Ω “õ–∞–π—Ç–∞ –∞—Ç–∞—É—ã –∫–µ—Ä–µ–∫ (—Å—ñ–∑ –¥–µ —Å–æ–ª –∂–∞—Å–∞—É—ã“£—ã–∑“ì–∞ –±–æ–ª–∞–¥—ã).

#### store-event-“ì–∞ –∂–∞–∑—ã–ª—É

`useEvent` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –µ–∫—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ –±–∞—Ä:

1. Event –∞—Ç–∞—É—ã, –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ `create` –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω—ñ“£ “õ–∞–π—Ç–∞—Ä“ì–∞–Ω `event` –æ–±—ä–µ–∫—Ç—ñ–Ω—ñ“£ ”©—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω–µ–Ω –±—ñ—Ä—ñ.
2. Event —Ç—ã“£–¥–∞—É—à—ã —Ñ—É–Ω–∫—Ü–∏—è—Å—ã.

```jsx
const Controls = () => {
  const { increase, update } = useCounterCommand()

  useCounterEvent('updateFail', (arg) => {
    console.log(arg)
  })

  const [input, setInput] = useState(0)

  return (
    <>
      <input
        type="number"
        onChange={(e) => {
          setInput(parseInt(e.target.value, 10))
        }}
      />
      <button onClick={() => update(input)}>update to {input}</button>
      <button onClick={increase}>+</button>
    </>
  )
}
```

---

### –ë—ñ—Ä–¥–µ–Ω –±—ñ—Ä–Ω–µ—à–µ state –ª–∞—Ä–¥—ã –±–∞“õ—ã–ª–∞—É

state-–¥–∞—Ä–¥—ã –±—ñ—Ä—ñ–∫—Ç—ñ—Ä—É –∂”ô–Ω–µ `query.salary` –Ω–µ `query.bonus` ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω–µ–Ω –±–∞–π“õ–∞—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã

```typescript
const income = useEmployeeQuery((query) => query.salary + query.bonus)
```

state-–¥–∞—Ä–¥—ã –±—ñ—Ä—ñ–∫—Ç—ñ—Ä—É –∂”ô–Ω–µ `query.phone` –Ω–µ `query.email` ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω–µ–Ω –±–∞–π“õ–∞—É –∫–µ–∑—ñ–Ω–¥–µ –º–∞—Å—Å–∏–≤ —Ä–µ—Ç—ñ–Ω–¥–µ “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã

```typescript
const [phone, email] = useUserQuery((query) => [query.phone, query.email])
```

state-–¥–∞—Ä–¥—ã –±—ñ—Ä—ñ–∫—Ç—ñ—Ä—É –∂”ô–Ω–µ `query.firstName`, `query.lastName` –Ω–µ `query.age` ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä—ñ–Ω–µ–Ω –±–∞–π“õ–∞—É –∫–µ–∑—ñ–Ω–¥–µ –æ–±—ä–µ–∫—Ç —Ä–µ—Ç—ñ–Ω–¥–µ “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã.

```typescript
const { name, age } = useUserQuery((query) => ({
  name: `${query.firstName} ${query.lastName}`,
  age: query.age,
}))
```

`useQuery` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É–¥—ã —Ç–∏–≥—ñ–∑—É, –æ–Ω—ã“£ –±—ñ—Ä—ñ–Ω—à—ñ —Ñ—É–Ω–∫—Ü–∏—è–ª—ã“õ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–Ω—ñ“£ ”©–º—ñ—Ä–¥—ñ“£ –∞–ª–¥—ã“£“ì—ã –∂”ô–Ω–µ –∫–µ–ª–µ—Å—ñ –µ—Å–µ–ø—Ç–µ—Ä—ñ–Ω—ñ“£ “õ–∞–π—Ç–∞–ª–∞–Ω—É –Ω”ô—Ç–∏–∂–µ—Å—ñ–Ω “õ–∞—Ä—ã—Å—Ç—ã—Ä—É –∞—Ä“õ—ã–ª—ã –∞–Ω—ã“õ—Ç–∞–ª–∞–¥—ã.

”ò–¥–µ–ø–∫—ñ —Ç“Ø—Ä–¥–µ, –µ—Ä–µ–∫—à–µ–ª—ñ–∫—Å—ñ–∑ —Å–∞–ª—ã—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω –∞–ª–∞—Ç—ã–Ω –±–æ–ª–∞–¥—ã. `Object.is(old, new)` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω –æ—Ä—ã–Ω–¥–∞—É –∫–µ–∑—ñ–Ω–¥–µ `true` –±–æ–ª—Å–∞, “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω–¥–∞–ª–º–∞–π–¥—ã.

–ï–≥–µ—Ä –æ–ª–∞—Ä ”ô–ª–¥–µ“õ–∞–π–¥–∞“ì—ã —Ç“Ø—Ä–¥–µ–≥—ñ –µ–º–µ—Å, —Å–µ–±–µ–±—ñ –º–∞—Å—Å–∏–≤ —Ç“Ø—Ä—ñ–Ω–¥–µ–≥—ñ `object` —Ç“Ø—Ä—ñ–Ω–¥–µ –±–æ–ª—Å–∞, –æ–ª–∞—Ä–¥—ã“£ –∞—Ä–∞—Å—ã–Ω–¥–∞ –∂–µ—Ç—ñ–ª–¥—ñ—Ä—É –æ—Ä—ã–Ω –∞–ª–∞—Ç—ã–Ω –±–æ–ª–∞–¥—ã. –û–ª–∞—Ä ”ô–ª–¥–µ“õ–∞–π–¥–∞ —Å”ô–π–∫–µ—Å –∫–µ–ª–º–µ—Å–µ, “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã.

`useQuery` —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω—ã“£ –µ–∫—ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ –æ–ø—Ü–∏—è–ª—ã“õ —Ñ—É–Ω–∫—Ü–∏—è –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã –∂”ô–Ω–µ —Å—ñ–∑ –±“±–ª ”ô–¥–µ–ø–∫—ñ ”ô—Ä–µ–∫–µ—Ç—Ç—ñ ”©–∑–≥–µ—Ä—Ç—É “Ø—à—ñ–Ω —Å–∞–ª—ã—Å—Ç—ã—Ä—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã–Ω “õ–∞–π—Ç–∞ “õ“±—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã.

---

## –ò–Ω—Å–ø–∏—Ä–∞—Ç—Ü–∏—è–ª—ã“õ –º”ô–Ω–µ—Ä

- [Remesh](https://github.com/remesh-js/remesh) `query`, `command` –∂”ô–Ω–µ `event` “±—Å—ã–Ω—É–ª–∞—Ä—ã–Ω—ã“£ –¥–∏–∑–∞–π–Ω—ã–Ω–¥–∞ Jagdai Remesh-—Ç—ñ “õ“±—Ä—ã–ª“ì–∞–Ω–Ω–∞–Ω –∫”©–ø—Ç–µ–≥–µ–Ω —Å—ã–∑—ã“õ—Ç–∞—Ä—ã –±–∞—Ä. –®–∞—Ä—Ç—Ç–∞—Ä —Ç—É—Ä–∞ –∂“Ø—Ä–≥–µ–Ω–¥–µ, –∞—Ä–Ω–∞–π—ã –∂–æ–±–∞–ª–∞—Ä–¥—ã –∂–µ—Ç—ñ–ª–¥—ñ—Ä—É–≥–µ “Ø–ª–∫–µ–Ω –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ –±–µ—Ä–µ—Ç—ñ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç—ñ, –∫“Ø—à—Ç—ñ –∂”ô–Ω–µ –∫”©–±—ñ—Ä–µ–∫ Remesh —Å—ñ–∑–¥—ñ“£ —Ç–∞“£–¥–∞—É—ã“£—ã–∑ –±–æ–ª–º–∞“ì–∞–Ω–¥–∞ –∂–∞“õ—Å—ã –±–æ–ª–∞–¥—ã.

- [Hox](https://github.com/umijs/hox) Jagdai “õ“±—Ä—É–¥—ã“£ —Å–µ–±–µ–±—ñ - —Å—Ç–µ–π—Ç –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Å—ã–Ω “õ–æ–ª–¥–∞–Ω–±–∞–π—Ç—ã–Ω –∂–æ–±–∞ –±–æ–ª–¥—ã –∂”ô–Ω–µ –∂–∏—ñ “õ–∞–π—Ç–∞–¥–∞–Ω –∂–∞—Ä–∏—è–ª–∞–Ω—É–ª–∞—Ä –∫”©–±—ñ–Ω–µ—Å–µ —Ç–∏—ñ–º–¥—ñ –µ–º–µ—Å –∂–∞“ì–¥–∞–π–¥–∞, —Ç”©–º–µ–Ω –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É “õ–∞–π—Ç–∞ “õ“±—Ä–∞—Å—Ç—ã—Ä—É—ã “õ–∞–∂–µ—Ç –±–æ–ª–¥—ã. –û–Ω—ã“£ —É–∞“õ—ã—Ç—à–∞“ì–∞–Ω –∂–∞—É–∞–ø“õ–∞ –Ω—ã—Å–∞–Ω—ã –±–æ–ª—Å–∞, Hox —Ç—É—Ä–∞–ª—ã –±—ñ–ª–≥—ñ–º—ñ–∑ –±–æ–ª—Å–∞, Jagdai –∂–∞—Å–∞–ª–º–∞“ì–∞–Ω –±–æ–ª–∞—Ä –µ–¥—ñ. –û“ì–∞–Ω “õ–æ—Å–∞, Store –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–Ω—ñ“£ —ñ—à—ñ–Ω–¥–µ —Ç–µ–∑ “õ–∞–π—Ç–∞ –ø–∞–π–¥–∞–ª–∞–Ω—É –∂–∞“ì–¥–∞–π—ã–Ω—ã“£ —à–µ—à—ñ–º—ñ–Ω –¥–µ Hox-—Ç–∞–Ω –∞–ª–¥—ã–Ω –∞–ª—É –∫–µ—Ä–µ–∫ –±–æ–ª–¥—ã.

- [Zustand](https://github.com/pmndrs/zustand) Zustand-—Ç—ã“£ selector —Å—Ç–∏–ª—å–¥—ñ API-—Å—ã useQuery-–Ω—ã“£ –¥–∏–∑–∞–π–Ω—ñ–Ω–µ –º“Ø–Ω–¥–µ–ª—ñ–∫ –±–æ–ª–¥—ã.
